<!doctype html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8" />
        <title>poly-market 加密市场</title>
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <link rel="stylesheet" href="/crypto-markets/crypto-markets.css" />
    </head>
    <body>
        <div class="wrap">
            <h1
                >Polymarket 加密市场列表 <span class="chip">末日市场</span>
                <a href="/dashboard" class="home-link">返回数据面板</a></h1
            >
            <div class="bar">
                <button id="outcomeToggle">筛选：YES/NO</button>
                <select id="tagSelect" aria-label="标签筛选"></select>
                <div class="bar-event-group">
                    <select id="eventSelect" aria-label="事件筛选"></select>
                    <button id="reload">刷新数据</button>
                </div>
                <span id="status" class="status"></span>
            </div>
            <div class="scroll">
                <table>
                    <thead>
                        <tr id="cols"></tr>
                    </thead>
                    <tbody id="rows"></tbody>
                </table>
            </div>
            <section class="chart-section">
                <div class="chart-head">
                    <div>
                        <h2 class="chart-title">YES Token 价格曲线</h2>
                        <p id="chartStatus" class="chart-status">等待市场列表加载…</p>
                        <p id="chartRange" class="chart-range"></p>
                        <p id="chartWindowInfo" class="chart-window-info">窗口：—</p>
                    </div>
                    <div class="chart-controls">
                        <label>
                            时间粒度
                            <select id="chartInterval"></select>
                        </label>
                    </div>
                </div>
                <div class="chart-token-panel">
                    <div class="chart-token-head">
                        <span>曲线列表（自动来自当前市场）</span>
                        <div class="chart-token-actions">
                            <button type="button" id="chartSelectAll">全选</button>
                            <button type="button" id="chartClearAll">全不选</button>
                        </div>
                    </div>
                    <div id="chartTokenList" class="chart-token-list"></div>
                </div>
                <div class="chart-visual">
                    <div class="chart-main">
                        <div class="chart-main-canvas">
                            <canvas
                                id="yesTokenChart"
                                width="2000"
                                height="1120"
                                role="img"
                                aria-label="市场 YES token 价格曲线"
                            ></canvas>
                            <div id="chartHoverLabel" class="chart-hover-label" aria-hidden="true">
                                <strong id="chartHoverLabelTitle"></strong>
                                <span id="chartHoverLabelTime"></span>
                                <span id="chartHoverLabelPrice"></span>
                            </div>
                            <div id="chartEmpty">暂无可绘制的 YES token</div>
                        </div>
                        <span class="timeline-hint">拖动底部选择框即可缩放/移动时间区间</span>
                    </div>
                </div>
                <div id="chartLegend" class="chart-legend"></div>
            </section>
        </div>

        <div id="detailPanel" class="detail-panel">
            <div class="detail-card">
                <header>
                    <span id="detailTitle"></span>
                    <button id="detailClose">关闭</button>
                </header>
                <pre id="detailJson"></pre>
            </div>
        </div>

        <div id="orderPanel" class="detail-panel">
            <div class="detail-card order-card">
                <header>
                    <span>下单</span>
                    <button id="orderClose">关闭</button>
                </header>
                <div class="order-meta">
                    <strong id="orderQuestion">—</strong>
                    <div class="order-token-group" id="orderTokenGroup"></div>
                    <div>事件：<span id="orderEventSlug" class="muted">—</span></div>
                    <div>当前最优卖价：<span id="orderBestAsk" class="muted">—</span></div>
                </div>
                <form id="orderForm" class="order-form">
                    <label>
                        买单价格（%）
                        <input
                            type="number"
                            id="orderBuyPrice"
                            step="0.1"
                            min="0.1"
                            max="100"
                            required
                        />
                    </label>
                    <label>
                        买单数量
                        <input type="number" id="orderSize" step="1" min="1" required />
                    </label>
                    <label>
                        止盈卖价（%，可选）
                        <input type="number" id="orderTakeProfit" step="0.1" min="0" max="100" />
                    </label>
                    <label>
                        客户端
                        <select id="orderPkIdx" required>
                            <option value="">请选择客户端</option>
                        </select>
                    </label>
                    <div class="order-actions">
                        <button type="submit" id="orderSubmit">提交</button>
                    </div>
                </form>
                <p id="orderStatus" class="order-status"></p>
            </div>
        </div>

        <div id="orderToastContainer" class="toast-container"></div>

        <script src="/crypto-markets/crypto-markets.js"></script>
    </body>
</html>
